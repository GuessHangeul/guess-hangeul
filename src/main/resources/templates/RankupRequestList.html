<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>집현전 신청 목록</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
</head>
<body>
<header class="p-3 mb-3 border-bottom">
    <th:block th:replace="~{/common/withdrawalModal :: withdrawalModal}"
              sec:authorize="isAuthenticated()"></th:block>
    <div class="container">
        <div class="d-flex justify-content-between align-items-center w-100">
            <div>
                <a href="/" class="nav-link px-2 link-secondary">
                    <img class="img-fluid" style="height: 30px;" th:src="@{/logo.png}" alt="로고 이미지">
                </a>
            </div>

            <ul class="nav flex-grow-1 justify-content-center">
                <li><a href="/quizBoard/1" class="nav-link px-3 link-body-emphasis">문제 게시판</a></li>
                <li><a href="/communityBoard/1" class="nav-link px-3 link-body-emphasis">커뮤니티</a></li>
                <li><a href="/rank" class="nav-link px-3 link-body-emphasis">랭킹</a></li>
                <li><a sec:authorize="hasRole('KINGSEJONG')" href="/admin" class="nav-link px-3 link-body-emphasis">관리자
                    페이지</a></li>
            </ul>

            <div class="dropdown text-end">
                <a sec:authorize="isAuthenticated()"
                   class="d-block link-body-emphasis text-decoration-none dropdown-toggle"
                   data-bs-toggle="dropdown" aria-expanded="false">
                    <span th:text="${#authentication.principal.nickname}"></span>
                </a>
                <ul sec:authorize="isAuthenticated()" class="dropdown-menu text-small dropdown-menu-end">
                    <li class="dropdown-item"><span th:text="${roleName}"></span>
                        <span th:text="${#authentication.principal.score}"></span>
                    </li>
                    <li><a class="dropdown-item" href="/newBoardManagerApply">집현전 신청</a></li>
                    <li><a class="dropdown-item" href="/logout">로그아웃</a></li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item text-danger" data-bs-toggle="modal"
                           data-bs-target="#exampleModal">회원탈퇴
                    </a></li>
                </ul>
            </div>
        </div>
    </div>
</header>
<div class="p-5 mb-5 text-center</> bg-light">
    <h1 class="mb-3">집현전 신청</h1>
</div>
<div class="container">

    <table class="table" id="userTable">
        <thead>
        <tr>
            <th onclick="sortTable(0)">사용자 ID</th>
            <th onclick="sortTable(1)">닉네임</th>
            <th onclick="sortTable(2)">등 급</th>
            <th onclick="sortTable(3)">점 수</th>
            <th onclick="sortTable(4)">가입 일자</th>
            <th onclick="sortTable(5)">신청 시간</th>
            <th onclick="sortTable(6)">접속 횟수</th>
            <th onclick="sortTable(7)">처리 상태</th>
        </tr>
        </thead>
        <tbody>
        <!--id 갯수 만큼 반복-->
        <tr class="content" th:each="list : ${list}">
            <td class="userId" th:text="${list.users.userId}"></td>
            <td th:text="${list.users.nickname}"></td>
            <td th:text="${list.users.authority}"></td>
            <td th:text="${list.users.score}"></td>
            <td th:text="${list.users.createdAt}"></td>
            <td th:text="${list.createdAt}"></td>
            <td th:text="${list.users.connectCount}"></td>
            <td th:if="${list.status == 0}">
                <button class="approved" id = "approve-btn" type="button" onclick = "approve(this)">윤허</button>
                <button class="rejected" id = "reject-btn" type="button" onclick = "rejected(this)">거부</button>
            </td>
            <td th:if="${list.status == 1}">
                허가됨
            </td>
            <td th:if="${list.status == -1}">
                거부됨
            </td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>